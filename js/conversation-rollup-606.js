/*
 =======================================================================*\
|| ###################################################################### ||
|| # vBulletin 6.0.6
|| # ------------------------------------------------------------------ # ||
|| # Copyright 2000-2024 MH Sub I, LLC dba vBulletin. All Rights Reserved.  # ||
|| # This file may not be redistributed in whole or significant part.   # ||
|| # ----------------- VBULLETIN IS NOT FREE SOFTWARE ----------------- # ||
|| # http://www.vbulletin.com | http://www.vbulletin.com/license.html   # ||
|| ###################################################################### ||
\*========================================================================*/
// ***************************
// js.compressed/infraction.js
// ***************************
vBulletin.precache("error_adding_infraction error_adding_warning error_reversing_infraction give_infraction_ginfraction infraction_added infraction_reversed please_check_the_box_to_reverse_infraction please_specify_reason_to_reverse_infraction received_infraction received_warning warning_added".split(" "),[]);vBulletin.ensureObj("infraction");vBulletin.ensureObj("privateMessage");
(function(a){function E(c){var b=getSelectedMessages(),f=function(n,k){for(var e in b)a("[data-node-id={0}]".format(b[e]),".infractions-list").toggleClass("read",k).find(".privateMessageActionCheck").prop("checked",!1)};if(0<b.length)if("0"==pageData.threadmarking||"0"==pageData.userid){for(var q in b){var l=vBulletin.discussionViewCookie;c?l.set(b[q],Math.round((new Date).getTime()/1E3)):l.unset(b[q])}f(b,c)}else vBulletin.AJAX({call:"/ajax/api/node/"+(c?"markReadMultiple":"markUnreadMultiple"),
data:{nodeids:b},success:function(n){f(n,c)}})}function y(c,b,f,q){if(!c&&(c=a("#private-message-toolbar .infractions-paginator .infractionsPageTo"),0==c.length))return!1;updateCounter=f||0;q=q||!1;var l=c.closest(".infractions-paginator"),n=a("#privateMessageContainer .main-pane .pending-posts-container"),k=l.find("#maxPageNum").filter(":input[type=hidden]").val();c=parseInt(l.find(":input[type=hidden][name=pagenum]").val(),10);var e=parseInt(l.find(":input[type=hidden][name=per-page]").val(),10);
b=parseInt(b,10);if(isNaN(b)||isNaN(k)||isNaN(c))return!1;if(1>b||b>k)return vBulletin.error("error","please_enter_a_valid_page_number"),!1;if(b==c&&!f)return!1;var t={};a("#infractionFilters input:checked").each(function(){t[this.name]=this.value});t.time&&(t.time={from:t.time});var x={setCurrentPage:b,setPerPage:e,getPagingInfo:f,options:t,isAjaxTemplateRenderWithData:!0};vBulletin.AJAX({call:"/ajax/render/privatemessage_infraction_main",data:x,success:function(r){n.html(r.template);0<a(".infractions-list").length&&
vBulletin.infraction.markInfractions();var w=r=0;b<k?(w=b+1,1<b&&(r=b-1)):r=b-1;l.find(":input[type=hidden][name=pagenum]").val(b);l.find(":input[type=hidden][name=next-page]").val(w);l.find(":input[type=hidden][name=prev-page]").val(r);l.find(".infractionsNext").toggleClass("h-disabled",!w);l.find(".infractionsPrev").toggleClass("h-disabled",!r);l.find(".infractionsPageTo").val(b);f&&(r=a("#privateMessageContainer .main-pane .pending-posts-container .pending-posts-pageinfo"),r=parseInt(r.find(".totalpages").val(),
10),l.find("#maxPageNum").filter(":input[type=hidden]").val(r),k=r,l.find(".infractionsPageCount").text(r));C&&vBulletin.privateMessage.updatePaginationLinks(F,b,k);C&&!q&&vBulletin.privateMessage.pmFilterHistory.isEnabled()&&(x.maxPage=k,r=vBulletin.privateMessage.getPrivateMessageUrl(b),vBulletin.privateMessage.pmFilterHistory.pushState({infractionFilterParams:x},document.title,r.url))}})}var p=a("#infractions-tab"),C=vBulletin.privateMessage&&vBulletin.privateMessage.jsReady||!1,F=a("#privateMessageContainer");
vBulletin.infraction.infractUser=function(c,b){var f=a(this);if(f.data("ajaxstarted"))return!1;var q=f.hasClass("js-infraction-received");if(q){c="received_infraction_form";var l="received_infraction";var n="receive-infraction-dialog"}else c="give_infraction_form",l="give_infraction_ginfraction",n="give-infraction-dialog";f.data("ajaxstarted",!0);vBulletin.AJAX({call:"/ajax/render/"+c,data:{userid:f.data("userid"),nodeid:f.closest(".js-post-controls").data("node-id")||f.data("nodeid"),userInfraction:f.data("userinfraction")},
complete:function(){f.data("ajaxstarted",null)},success:function(k){a("."+n).length?a("."+n).replaceWith(k):a(k).appendTo(document.body).hide();k=a("."+n);k.dialog({title:vBulletin.phrase.get(l),autoOpen:!0,modal:!0,resizable:!1,closeOnEscape:!1,showCloseButton:!1,width:k.hasClass("error-infraction-dialog")?500:q?600:700,dialogClass:"dialog-container infraction-dialog-container dialog-box",close:function(){var e=a(".js-editor",this);e.length&&vBulletin.ckeditor.editorExists(e)&&vBulletin.ckeditor.destroyEditor(e);
a(this).dialog("destroy").remove()},open:function(){var e=this;if(q)vBulletin.ajaxForm.apply(a(".infraction-reverse-form",e),[{error_phrase:"error_reversing_infraction",success:function(d,g,h,m){vBulletin.alert("reverse_this_infraction","infraction_reversed");"function"==typeof b&&b.apply(f.get(0),[d]);a(e).dialog("close")},beforeSubmit:function(d,g,h){if(a(".infraction-nodeid",g).is(":checked"))a.trim(a(".infraction-reason",g).val())||(m="please_specify_reason_to_reverse_infraction",u=a(".infraction-reason",
g));else{var m="please_check_the_box_to_reverse_infraction";var u=a(".infraction-nodeid",g)}return m?(vBulletin.warning("reverse_this_infraction",m,function(){u.trigger("focus")}),!1):!0}}]),a(".reverse-infraction",e).on("click",function(){a(".infraction-reverse-form",e).submit()});else{var t=a(".infraction-send-pm",e);vBulletin.ajaxForm.apply(a(e),[{dataType:"json",error_phrase:"error_adding_infraction",success:function(d,g,h,m){g=d.infractionNodeid&&!d.infractionNodeid.errors;m="warning";g?(h=d.isWarning?
"warning_added":"infraction_added",m=""):h=d.isWarning?"error_adding_warning":"error_adding_infraction";vBulletin.alert("give_infraction_ginfraction",h,m);g&&("function"==typeof b&&b.apply(f.get(0),[d]),a(e).dialog("close"))},beforeSubmit:function(d,g,h){if("0"==a(".infraction-level-control option:selected",g).val()){d=function(I,J){w(a(".infraction-level",e));vBulletin.warning("give_infraction_ginfraction",I,function(){J.trigger("focus")})};if(""==a.trim(a(".custom-reason",g).val()))return d("please_specify_custom_reason",
a(".custom-reason",g)),!1;h=Number(a(".custom-points",g).val());if(isNaN(h)||0>h)return d("please_specify_custom_points",a(".custom-points",g)),!1;h=a(".custom-period option:selected",g).val();var m=Number(a(".custom-expires",g).val());if("N"!=h&&(isNaN(m)||0>=m))return d("please_specify_custom_expires",a(".custom-expires",g)),!1}d=a(".infraction-ban-reason .ban-reason",e);if(d.is(":visible")&&!a.trim(d.val()))return w(a(".infraction-ban",e)),a(".ban-reason-desc",e).removeClass("h-hide"),d.trigger("focus"),
a(".dialog-content",e).scrollTop(0).scrollTop(a(".infraction-ban-reason",e).position().top),!1;if(Number(t.data("required"))){var u=a(".js-editor",g),z=vBulletin.ckeditor.getEditor(u);g=z?z.getData():z.val();if(!a.trim(g))return vBulletin.warning("give_infraction_ginfraction","please_specify_infraction_pm",function(){w(t);z?z.focus():u.trigger("focus")}),!1}}}]);var x=function(d){r.toggleClass("h-hide",!d).find("input, select").prop("disabled",!1).end().find(".selectBox").toggleClass("selectBox-disabled",
!d)};a(".infraction-level-control",e).on("change",function(d,g,h){d=a(this.options[this.selectedIndex]);h&&1==h.length||(h=a(this).closest(".infraction-level").find(".infraction-warning-control input"));g||(d.data("allow-warning")?(h.prop("disabled",!1).val(this.value).parent().removeClass("h-hide"),x(!1)):(h.prop("disabled",!0).parent().addClass("h-hide"),"0"==this.value&&(x(!0),a(".textbox",r).first().trigger("focus"))));var m=g=0;h.prop("checked")||"0"==this.value?"0"==this.value&&(g=Number(a(".custom-infraction-info .custom-points",
e).val())||0)&&(m=1):(g=Number(d.data("points"))||0,m=1);h=a(".infraction-dashboard-stats").data();h=g&&K(Number(h.points)+g,Number(h.infractions)+m);G(h);A()});a(".infraction-warning-control input",e).on("click",function(){this.checked?G(!1):a(".infraction-level-control",e).trigger("change",[!0,this])});a(".custom-points",e).on("change",function(){a(".infraction-level-control",e).trigger("change",[!0])});var r=a(".custom-infraction-info",e).removeClass("h-hide");a("select",e).selectBox();r.addClass("h-hide");
a(".js-content-entry-panel, .js-editor",t).data("callback",function(){A()});vBulletin.ckeditor.initEditorComponents(t,!0);a(".toggle-button",e).on("click",function(d){d=a(this);var g=d.closest(".blockrow-head"),h=g.next(".blockrow-body"),m=d.hasClass("expand");h.toggle(m);g.toggleClass("collapsed",!m);A();d.toggleClass("collapse expand");g=d.attr("title");d.attr("title",d.data("toggle-title")).data("toggle-title",g);return!1});var w=function(d){a(".toggle-button.expand",d).trigger("click")},K=function(d,
g){if(0==d&&0==g)return!1;var h=!1;a(".infraction-ban-list tbody tr",e).each(function(m,u){if(u=a(this).data())if(m=Number(u.points),u=Number(u.infractions),m&&d>=m||u&&g>=u)return h=!0,!1});return h},G=function(d){var g=a(".infraction-ban-reason",e);d?(g.removeClass("h-hide"),w(a(".infraction-ban",e))):g.addClass("h-hide")},B=a(".dialog-content",e),A=function(){B[0]||(B[0]=e);var d=B[0].scrollHeight>parseFloat(B.css("max-height"));B.toggleClass("has-scrollbar",d)};A();a(".infraction-level-control",
e).trigger("change")}a(".close-infraction",e).on("click",function(){a(e).dialog("close")});a(".ckeditor-bare-box.ckeditor-load-on-focus",e).on("focus",function(){vBulletin.ckeditor.initEditor(this.id,{complete:function(d){A()},error:function(d){a("#"+d).prop("disabled",!1).removeClass("ckeditor-load-on-focus")}})})}})}})};vBulletin.infraction.loadUserInfractions=function(c){a.post(vBulletin.getAjaxBaseurl()+"/ajax/render/user_infractions",{userid:c.userid,pagenum:c.pageNumber},function(b,f,q){c.container.html(b);
a(".pagenav-form",p).length&&new vBulletin.pagination({context:p,tabParamAsQueryString:!1,allowHistory:1==p.find(".conversation-toolbar-wrapper").data("allow-history"),onPageChanged:function(l,n){vBulletin.infraction.loadUserInfractions({container:p,userid:p.data("userid"),pageNumber:l,replaceState:!0})}});"function"==typeof c.callback&&c.callback(b);if(c.pushState||c.replaceState)b=vBulletin.makePaginatedUrl(location.href,c.pageNumber),v||(D="1"==p.find(".conversation-toolbar-wrapper").data("allow-history"),
v=new vBulletin.history.instance(D)),v.isEnabled()&&(f={from:"infraction_filter",page:c.pageNumber,tab:p.data("url-path")?p.data("url-path"):"#"+p.attr("id")},v[c.pushState?"pushState":"setDefaultState"](f,document.title,b))},"json")};var v,D;vBulletin.infraction.setHistoryStateChange=function(){v||(D="1"==p.find(".conversation-toolbar-wrapper").data("allow-history"),v=new vBulletin.history.instance(D));v.isEnabled()&&v.setStateChange(function(c){var b=v.getState();if("infraction_filter"==b.data.from){v.log(b.data,
b.title,b.url);c=p.closest(".ui-tabs");var f=c.find(".ui-tabs-nav > li").filter('li:has(a[href*="#{0}"])'.format(p.attr("id")));f.hasClass("ui-tabs-active")?vBulletin.infraction.loadUserInfractions({container:p,userid:p.data("userid"),pageNumber:b.data.page,pushState:!1}):(b=f.index(),vBulletin.selectTabByIndex.call(c,b))}},"infraction_filter")};vBulletin.infraction.markInfractions=function(){if("0"==pageData.threadmarking||"0"==pageData.userid){var c,b,f;a(".infractions-list .list-item").each(function(){f=
a(this);b=f.data("nodeId");(c=vBulletin.discussionViewCookie.get(b))&&f.addClass("read")})}};a(document).off("click",".js-post-control__infraction").on("click",".js-post-control__infraction",function(c){vBulletin.infraction.infractUser.apply(this,[c,function(b){var f=a(this),q=f.find(".b-icon"),l=f.hasClass("js-infraction-received");q.removeClass("b-icon__tickets--neutral b-icon__tickets--warned b-icon__tickets--infracted");if(l){b="give_infraction_ginfraction";var n="b-icon__tickets--neutral"}else b.isWarning?
(b="received_warning",n="b-icon__tickets--warned"):(b="received_infraction",n="b-icon__tickets--infracted");f.toggleClass("js-infraction-received",!l);f.attr("title",vBulletin.phrase.get(b));q.addClass(n)}])});p.off("click",".infractionCtrl").on("click",".infractionCtrl",function(c){vBulletin.infraction.infractUser.apply(this,[c,function(b){vBulletin.infraction.loadUserInfractions({container:p,userid:a(this).data("userid"),pageNumber:1,pushState:1!=Number(a('.pagenav-form input[name="page"]',p).val())})}])});
p.on("click",".view-infraction",function(c){vBulletin.infraction.infractUser.apply(this,[c,function(b){b=Number(a('.pagenav-form input[name="page"]',p).val())||1;vBulletin.infraction.loadUserInfractions({container:p,userid:a(this).data("userid"),pageNumber:b,pushState:1!=b})}])});a(document).off("click","#privateMessageContainer .js-button-group .view-infraction").on("click","#privateMessageContainer .js-button-group .view-infraction",function(c){vBulletin.infraction.infractUser.apply(this,[c,function(b){}])});
a(".infraction-delete").off("click").on("click",function(c){$button=a(this);var b=!1;if($button.parents("#pmFloatingBarContent").hasClass("infractions-paginator"))var f=getSelectedMessages();else f=[a("#privateMessageContainer .js-conversation-starter").data("nodeId")],b=!0;0<f.length&&openConfirmDialog({title:vBulletin.phrase.get("messages_header"),message:vBulletin.phrase.get("are_you_sure_delete_infractions"),iconType:"warning",onClickYes:function(){vBulletin.AJAX({url:vBulletin.getAjaxBaseurl()+
"/ajax/api/node/deleteNodes",data:{nodeids:f,hard:0},success:function(q){b?location.href=a("#pmBtnBackToInfractions").prop("href"):location.reload()}})}})});a(".infraction-mark_as_read").off("click").on("click",function(c){E(!0)});a(".infraction-mark_as_unread").off("click").on("click",function(c){E(!1)});a(document).ready(function(){0<a(".infractions-list").length&&vBulletin.infraction.markInfractions();if(0<a("#pmBtnBackToInfractions").length){var c=a("#privateMessageContainer .conversation-list .b-post--infraction").data("nodeId");
vBulletin.markRead(c)}});a("#infractionFilters").trigger("reset").find(".filter-options input").off("click").on("click",function(c){L.apply(this)});a(document).off("click","#privatemessagePaging .infractionsPrev").on("click","#privatemessagePaging .infractionsPrev",function(c){c.preventDefault();c=a(this).closest("#privatemessagePaging").find(':input[type=hidden][name="prev-page"]').val();y(a(this),c)});a(document).off("click","#privatemessagePaging .infractionsNext").on("click","#privatemessagePaging .infractionsNext",
function(c){c.preventDefault();c=a(this).closest("#privatemessagePaging").find(':input[type=hidden][name="next-page"]').val();y(a(this),c)});var H=function(c){var b=a("#privatemessagePaging"),f=b.find("input[name='pagenum']");c=f.val();var q=b.find("#maxPageNum");b=q.val();var l=a("#infractionFilters"),n={};vBulletin.privateMessage.updatePaginationLinks(F,c,b);vBulletin.privateMessage.getPageFiltersForUrl=function(k){l.find("input:checked").each(function(){k["filter_"+this.name]=this.value});return k};
a("#infractionsFilter").length&&a("#infractionFilters input:checked").each(function(){queryParams["filter_"+this.name]=this.value});vBulletin.privateMessage.pmFilterHistory.isEnabled()&&(n={infractionFilterParams:{setCurrentPage:c,options:{},maxPage:b}},l.find("input:checked").each(function(){n.infractionFilterParams.options[this.name]=this.value}),n.infractionFilterParams.options.time&&(n.infractionFilterParams.options.time={from:n.infractionFilterParams.options.time}),vBulletin.privateMessage.pmFilterHistory.setDefaultState(n,
document.title,window.location.href),vBulletin.privateMessage.pmFilterHistory.setStateChange(function(k){k=vBulletin.privateMessage.pmFilterHistory.getState();k.data.hasOwnProperty("infractionFilterParams")&&(k=k.data.infractionFilterParams,a.each(k.options,function(e,t){e="input[name='{0}'][value='{1}']".format(e,t);l.find(e).prop("checked",!0)}),q.val(k.maxPage),f.val(k.setCurrentPage),y(null,k.setCurrentPage,!0,!0))},"privatemessage"));C=!0};if(C)H();else a(document).one("vb-privatemessage-js-ready",
H);a(document).off("keypress","#privatemessagePaging .infractionsPageTo").on("keypress","#privatemessagePaging .infractionsPageTo",function(c){if(13==c.keyCode){c.preventDefault();c=a(this);var b=parseInt(c.val(),10);if(isNaN(b))return vBulletin.error("error","please_enter_a_valid_page_number"),!1;y(c,b)}});var L=function(c){$paginateButton=a("#private-message-toolbar .infractions-paginator .infractionsPageTo");if($paginateButton.length)y($paginateButton,1,!0);else{var b={};a(this).closest(".filter-options-list").find("input:checked").each(function(){b[this.name]=
a(this).val()});b.time&&(b.time={from:b.time});a(this).prop("checked",!0);b.page=1;b.perpage=pmPerPage;vBulletin.AJAX({call:"/ajax/render/privatemessage_infraction_main",data:{options:b,isAjaxTemplateRenderWithData:!0},success:function(f){a("#privateMessageContainer .pending-posts-container").html(f.template);pmPageNum=1;0<a(".infractions-list").length&&vBulletin.infraction.markInfractions()}})}}})(jQuery);
;

// ***************************
// js.compressed/conversation.js
// ***************************
vBulletin.precache("cancel_new_with_quote create_new_conversation_with_quote error_fetching_comments error_fetching_quotes error_x existing_message_will_be_deleted invalid_server_response_please_try_again new_with_quote please_click_on_the_quote_icon_of_the_post_you_want_to_quote post_reply share_post_link_help visitor_message x_comment x_comments_lower your_post_is_now_being_reviewed_and_waiting_for_moderators_approval".split(" "),[]);vBulletin.ensureObj("conversation.contentEntryBox");
$.extend(vBulletin.conversation,function(a,e){function H(c){0<c.nodeIds.length&&(a("body").css("cursor","wait"),e.AJAX({call:"/createcontent/fetch-quotes",data:{nodeid:c.nodeIds},complete:function(){a("body").css("cursor","auto")},success:function(f){var h="";a.each(f,function(t,r){h+=JShtmlEncode(r)+"<br/><br/>"});e.ensureFun(c.onSuccess)(a.trim(h))},title_phrase:"conversation",error_phrase:"error_fetching_quotes"}))}function C(c){var f=a(".b-post-control__quote--selected",c),h=a(".js-content-entry .js-editor",
c).last();if(0<f.length){var t=[];f.each(function(){t.push(a(this).parent().data("node-id"))});H({nodeIds:t,onSuccess:function(r){if(m.editorExists(h)){var u=m.getEditor(h);u&&u.setData("",function(){u.insertHtml(r.replace(/(\n)/gi,"<br />"));u.focus()})}else h.val(r.replace(/<br(\s*\/|)>/gi,"\n")).trigger("focus")}})}else m.editorExists(h)?m.getEditor(h).focus():h.trigger("focus")}function I(c){e.qtip.apply(c,"qtip-sharepostlink",{content:{title:{text:e.phrase.get("share_post_link_help"),button:!0},
text:'<input type="text" class="textbox stretch" value="'+c.attr("href")+'" />'},show:{event:"click",solo:!0,ready:!0},events:{visible:function(f,h){h.elements.content.find("input.textbox").trigger("select").trigger("focus")}},hide:{event:"unfocus",fixed:!0}})}function J(c){return 1==a(".conversation-media-view",c).length?2:1==a(".conversation-stream-view",c).length?1:0}function K(){var c=a(".conversation-content-widget"),f="1"==a(".conversation-toolbar-wrapper",c).data("allow-history"),h=c.filter(".widget-tabs").tabs({active:J(c)});
h.trigger("vb-tabinit");h.find(".widget-header .widget-tabs-nav li.ui-state-default:not(.ui-tabs-active) a").off("click").on("click",function(){location.href=a(this).attr("data-href");return!1});h=new e.pagination({context:c,allowHistory:f,onPageChanged:function(b,g,d){w.updatePageNumber(b);if(!g){if(g=w.getOption("customFilter"))g.pagenum=b,delete w.lastFilters,d&&delete g[a(".toolbar-search-form .js-filter-search",c).attr("name")];w.applyFilters(!1,!1,!1,!0)}e.Responsive.checkForVideoSignature()}});
var t=a(".conversation-toolbar-wrapper.scrolltofixed-floating",c),r=function(){return 0<c.length?c.offset().top+(c.outerHeight()-parseFloat(c.css("border-bottom-width")))-t.height():0};try{var u=new e.scrollToFixed({element:t,limit:r()})}catch(b){}var w=new e.conversation.filter({context:c,scrollToTop:c,pagination:h,allowHistory:f,hash:c.find(".js-module-top-anchor").attr("id"),onContentLoad:function(){u.updateLimit(r())}});a(document).offon("click",".js-show-post-link",function(b){b.preventDefault();
I(a(b.currentTarget))});a(document).offon("click","a.js-scroll-if-on-page",b=>{b=a(b.currentTarget);b=parseInt(b.data("nodeid"),10);$anchor=a(".js-post[data-node-id='"+b+"']:not(.pinned-answer)");if($anchor.length)return vBulletin.animateScrollTop($anchor.offset().top),!1});a(".conversation-toolbar .post-reply-btn").off("click").on("click",function(b){b=a(".js-content-entry").last();if(1==b.length){var g=a(".js-editor",b);b=b.offset().top;var d=a(".conversation-toolbar-wrapper"),n=d.hasClass("scrolltofixed");
d=d.length&&d.outerHeight(!0)||0;var k=m.editorExists(g);n||(b+=d);k?C(c):m.initEditor(g,{complete:function(){C(c)}});e.animateScrollTop(b,{duration:500,complete:function(){k&&m.focusEditor(g)}})}});a(document).off("mouseover",".js-userinfo__signature").on("mouseover",".js-userinfo__signature",function(){var b=a(this);"1"!=b.data("qtip-initialized")&&(b.data("qtip-initialized","1"),b.find(".user-signature"),e.qtip.apply(b,"qtip-signature",{content:b.find(".user-signature"),hide:{event:"unfocus"},
show:{solo:!0}}),a(this).trigger("mouseover"))});f=a(".conversation-list",c);a(".js-post-controls",f).disableSelection();f.off("click",".js-post-control__quote").on("click",".js-post-control__quote",function(){a(this).toggleClass("b-post-control__quote--selected");var b=a(".post-reply-btn .js-button__text-secondary").text().match(/[0-9]+/);b=b?Number(b[0]):0;a(this).hasClass("b-post-control__quote--selected")?b++:b--;D.clickQuoteIcon(b)});vBulletin.conversation.initContentEvents(f);"inlinemod"in e&&
e.ensureFun(e.inlinemod.init)(c);f.off("click",".js-comment-entry__post").on("click",".js-comment-entry__post",function(b){vBulletin.conversation.postComment.apply(this,[b,function(g){if(g)if(g.redirecturl)location.replace(g.redirecturl);else{var d=a(this).closest(".js-post"),n=g.totalcomments,k=d.find(".js-comments").removeClass("h-hide"),y=d.find(".js-comments__comments");a(this).closest(".js-comment-entry").addClass("b-comment-entry--has-comments").find(".js-comment-entry__textbox").val("").trigger("input");
var l=a(g.template),p=l.find(".js-comment");l.appendTo(y);k.find(".js-comments__footer").addClass("h-hide");k.find(".js-comments__page--prev").show().data("page-num",1).prev("label").hide();k.find(".js-comments__header").removeClass("h-hide").find(".js-comments__pagination").removeClass(function(){return 1<n?"h-hide":""}).end().find(".js-comments__total-text").text(function(){return e.phrase.get(1<n?"x_comments_lower":"x_comment",n)});d=d.closest(".ui-tabs-panel").find(".conversation-toolbar-wrapper");
d.hasClass("scrolltofixed-floating")&&(d=d.data("object-instance"))&&d.addLimit(p.outerHeight(!0));e.scrollToAnchor("#post"+g.nodeId)}}])});f.off("click",".js-comments__page--prev, .js-comments__page--next").on("click",".js-comments__page--prev, .js-comments__page--next",function(){a("body").css("cursor","wait");var b=a(this),g=b.closest(".js-post"),d=g.find(".js-comments"),n=d.find(".js-comments__comments"),k=Number(b.data("page-num"))||0,y=b.closest(".canvas-widget").attr("data-widget-instance-id");
e.AJAX({call:"/ajax/fetch-comments",data:{page:k,parentid:g.attr("data-node-id"),postindex:g.find(".js-post__content .js-show-post-link").text().replace("#",""),widgetInstanceId:y,isblogcomment:1==b.closest(".blog-list").length?1:0,isarticlecomment:1==b.closest(".article-list").length?1:0},complete:function(l,p){a("body").css("cursor","auto")},success:function(l,p,q){if(l.templates){var x=a("<ul />").attr("class",n.attr("class")),z=l.totalcomments;a.each(l.templates,function(E,v){x.append(v)});n.replaceWith(x);
p=Number(x.find(".js-comment:first-child .js-show-post-link span").text().replace(/\D/g,""));q=Number(x.find(".js-comment:last-child .js-show-post-link span").text().replace(/\D/g,""));var L=Math.ceil(z/vBulletin.conversation.COMMENTS_PER_PAGE);if(b.hasClass("js-comments__page--prev")){var A=b;var B=d.find(".js-comments__page--next")}else A=d.find(".js-comments__page--prev"),B=b;var G=function(E,v,F){E.find(".js-comments__pagination > label").show().text(v==F?v:"{0} - {1}".format(v,F))};k=l.page;
G(d.find(".js-comments__header"),p,q);1==k?d.find(".js-comments__footer").addClass("h-hide"):(p=q+1,q=p+vBulletin.conversation.COMMENTS_PER_PAGE-1,q=q>z?z:q,l=d.find(".js-comments__footer"),l.removeClass("h-hide"),G(l,p,q));A.data("page-num",k+1);B.data("page-num",k-1||1);A.removeClass("h-hide-imp")[L>k?"show":"hide"]().prev("label").show();B[1<k?"show":"hide"]()}},title_phrase:"conversation",error_phrase:"error_fetching_comments"})});vBulletin.conversation.bindEditFormEventHandlers("all");if(f=parseInt(pageData.nodeid))e.markRead(f),
e.AJAX({call:"/ajax/api/node/incrementNodeview",data:{nodeid:f},error:e.ajaxtools.logAjaxError,api_error:e.ajaxtools.logApiError});-1!=location.href.indexOf("edit=1")&&pageData.nodeid&&0<pageData.nodeid&&a("#edit-"+pageData.nodeid).trigger("click");a(document).off("change",".js-article-content-pagenav").on("change",".js-article-content-pagenav",function(){location.href=a(this).val()})}if(!e.pageHasSelectors([".forum-conversation-content-widget",".group-conversation-content-widget",".blog-conversation-content-widget",
".profile-widget","#privateMessageContainer .infractions"]))return!1;var m=e.ckeditor,D={clickQuoteIcon:function(c){this.setPostReplyButtonStyle(c);1==c&&a(".post-reply-btn:visible").trigger("click");0==c&&(c=a(".js-content-entry").last(),c=a(".js-editor",c).attr("id"),m.editorExists(c)&&m.getEditor(c).setData(""))},clickCancelButton:function(){a(".b-post-control__quote--selected").removeClass("b-post-control__quote--selected");this.setPostReplyButtonStyle(0);return!0},setPostReplyButtonStyle:function(c){var f=
a(".post-reply-btn").find(".js-button__text-secondary");0<c?f.text("("+c+")"):f.text("")}};a(function(){K()});return{replyWithQuotes:D}}(jQuery,vBulletin));
;

// ***************************
// js.compressed/subscribe.js
// ***************************
vBulletin.precache(["follow","following","following_pending","social_group_count_members_x","unsubscribe_overlay_error"],[]);
(function(){function h(a,b){a=$(".js-replace-member-count-"+a);a.length&&a.each(function(){var c=$(this),d=c.data("replace-phrase-varname"),k=parseInt(c.data("member-count"),10)+b;c.text(vBulletin.phrase.get(d,k));c.data("member-count",k)})}function l(a){a=$(this);if(a.hasClass("isSubscribed")&&!a.hasClass("is-owner")){let b=a.outerWidth();a.css("width",b+"px");e(a,"following_remove","b-button--unfollow")}}function m(a){a=$(this);a.hasClass("b-button--unfollow")&&f(a,"following","","b-button--unfollow");
a.css("width","")}vBulletin.subscribe={};var g=function(a,b){a.children(".js-button__text-primary").text(vBulletin.phrase.get(b))},f=function(a,b,c,d){g(a,b);a.addClass((c||"")+" b-button--special").removeClass((d||"")+" b-button--secondary")},e=function(a,b,c,d){g(a,b);a.addClass((c||"")+" b-button--secondary").removeClass((d||"")+" b-button--special")},n=function(a,b,c){vBulletin.AJAX({call:b,data:c,success:function(d){!isNaN(d)&&1<=d?1==d?f(a,"following","isSubscribed"):f(a,"following_pending",
"is-pending"):vBulletin.error("follow","follow_error")},title_phrase:"follow",error_phrase:"follow_error"})},p=function(a){var b=$(a),c=parseInt(b.attr("data-node-id"),10);a=parseInt(b.attr("data-owner-id"),10);vBulletin.AJAX({call:"/ajax/api/node/requestChannel",data:{channelid:c,recipient:a,requestType:"sg_member"},success:function(d){!0===d?(f(b,"joined","has-joined"),h(c,1),(b.hasClass("join-to-post-btn")||b.hasClass("js-refresh"))&&window.location.reload()):isNaN(d)||f(b,"following_pending",
"is-pending")},title_phrase:"join",error_phrase:"join_error"})},q=function(a){var b=$(a),c=parseInt($(a).attr("data-node-id"),10);vBulletin.AJAX({call:"/ajax/api/blog/leaveChannel",data:{channelId:c},success:function(d){!0===d?(b.hasClass("js-button--follow")?(g(b,"follow"),b.addClass("b-button--special").removeClass("isSubscribed b-button--unfollow")):(g(b,"join"),b.removeClass("has-joined b-button--special leave-btn")),h(c,-1),b.is(".js-no-refresh")||location.reload()):vBulletin.error("leave","invalid_server_response_please_try_again")},
title_phrase:"leave",error_phrase:"invalid_server_response_please_try_again"})},r=function(a){var b=$(a);a=$(a).attr("data-node-id");vBulletin.AJAX({call:"/ajax/api/follow/delete",data:{follow_item:a,type:"follow_contents"},success:function(c){1==c?e(b,"follow","","isSubscribed b-button--unfollow"):vBulletin.error("follow","unfollow_error")},title_phrase:"follow",error_phrase:"unfollow_error"})};vBulletin.subscribe.updateSubscribeButton=function(a){if("undefined"!=typeof a){var b=$(".js-button--follow").filter(function(){return $(this).data("node-id")==
pageData.nodeid&&pageData.nodeid!=pageData.channelid});switch(a){case 0:e(b,"follow","","isSubscribed b-button--unfollow");break;case 1:e(b,"following","isSubscribed");break;case 2:e(b,"following_pending","is-pending")}}};$(".js-button--follow").on("click",function(a){a=$(this);if(a.hasClass("isSubscribed"))a.hasClass("b-button--unfollow")&&(a.hasClass("is-blog-channel")?q(this):r(this));else if(a=$(this),!a.hasClass("isSubscribed")&&!a.hasClass("is-pending")){var b=parseInt(a.attr("data-node-id"),
10),c={};a.hasClass("is-topic")?(c.follow_item=b,c.type="follow_contents",n(a,"/ajax/api/follow/add",c)):(c={},c.channelid=b,c.recipient=parseInt(a.attr("data-owner-id"),10),a.hasClass("is-blog-channel")?c.requestType="member":a.hasClass("is-sg-channel")?c.requestType="sg_subscriber":c.requestType="subscriber",n(a,"/ajax/api/node/requestChannel",c))}});$(".js-button--follow").on("mouseover",l);$(".js-button--follow, .js-subscription__follow").on("mouseout",m);$(".subscriptionsContainer").on("mouseover",
".js-subscription__follow",l);$(".subscriptionsContainer").on("mouseout",".js-subscription__follow",m);$(".join-to-post-btn").on("click",function(a){$(this).hasClass("has-joined")||$(this).hasClass("is-pending")||p(this)});$(document).on("click",".join-btn",function(a){$(this).hasClass("has-joined")||$(this).hasClass("is-pending")?$(this).hasClass("leave-btn")&&!$(this).hasClass("is-owner")&&q(this):p(this)});$(document).on("mouseover",".join-btn",function(a){a=$(this);a.hasClass("has-joined")&&!a.hasClass("is-owner")&&
e(a,"leave","leave-btn")});$(document).on("mouseout",".join-btn",function(a){a=$(this);a.hasClass("leave-btn")&&!a.hasClass("is-owner")&&f(a,"joined","","leave-btn")})})();
;

// ***************************
// js.compressed/tag-editor.js
// ***************************
vBulletin.precache("add_tags edit_tags error error_adding_search_tips_code_x error_adding_tags_code_x error_fetching_popular_tags invalid_server_response_please_try_again invalid_x_tag_length loading none popular_tags_cloud tag_cloud unable_to_load_tag_editor unable_to_save_tags you_may_add_one_more_tag you_may_add_x_more_tags you_may_not_add_any_more_tags".split(" "),["tagforcelower","tagmaxlen","tagminlen"]);
(function(c){function O(f,g){var q=g.split(",");g=[];c.each(q,function(k,m){""!=m&&g.push(m)});vBulletin.AJAX({call:"/ajax/api/tags/updateUserTags",data:{nodeid:f,taglist:g},success:function(k){if(k){var m=c("#content-tags-"+f);m.find(".js-content-tag, .js-content-tag-none").remove();k.tags&&0<k.tags.length?c.each(k.tags,function(v,r){var w=c("<span />").addClass("js-content-tag");c("<a />").attr("href",r.searchurl).html(r.tagtext).appendTo(w);v<k.tags.length-1&&w.append(document.createTextNode(", "));
w.appendTo(m)}):c("<span />").addClass("js-content-tag-none").html(vBulletin.phrase.get("none")).appendTo(m)}},error_phrase:"unable_to_save_tags",title_phrase:"edit_tags"})}function P(f){var g=c(this).data("node-id");vBulletin.AJAX({call:"/ajax/render/tag_editor",data:{nodeid:g,dialogOnly:!0,editPost:!0,editorClass:"js-topic-tag-editor",isAjaxTemplateRenderWithData:!0},success:function(q){c("body").append(q.template);c(document).on("vb-tag-editor-init",function(k,m){function v(){r.dialog("destroy").closest(".tag-editor-wrapper").remove()}
var r=m.$dialog;r.on("vb-tag-dialog-cancel",v);r.on("vb-tag-dialog-save",function(w,F){O(g,F.tagList);v()})});new vBulletin.tagEditor.instance(".js-topic-tag-editor",!1,!1,f)},error_phrase:"unable_to_load_tag_editor",title_phrase:"edit_tags"})}var M=vBulletin.ensureObj("jsexec.tag_editor",{exec:0});M.exec++;if(!(1<M)){var x={};vBulletin.tagEditor=vBulletin.tagEditor||{};vBulletin.tagEditor.instance=function(f,g,q,k){function m(){var a=n.find(".you-may-add-text");if(t||p){var b=t&&!p?t:!t&&p?p:Math.min(t,
p);a.find("span").text(b)}else a.addClass("h-hide");D()?d.is(":visible")&&d[0].focus():d.hide()}function v(a){a=c(this);var b=a.parent();!b.hasClass("added")&&C(a.text())&&(b.addClass("added"),d.is(":visible")&&d[0].focus());return!1}function r(a,b){0<a.length&&(b=(b.find(".tag-input").val()||"").split(","),c.each(b,function(e,h){var y=c.trim(h);a.each(function(){c(this).data("tag")==y&&c(this).addClass("added")})}))}function w(a){a.stopPropagation();var b=c(this),e=u.find(".tag-editor-container");
1==e.length?(e.dialog({title:vBulletin.phrase.get("add_tags"),autoOpen:!1,modal:!0,resizable:!1,closeOnEscape:!1,showCloseButton:!1,width:500,dialogClass:"dialog-container tag-editor-dialog-container dialog-box",open:function(){l.clearElements();var h=u.find(".tag-input").val();if(h){h=h.split(",");for(var y in h)C(c.trim(h[y]))}else z&&!d.attr("placeholder")&&d.attr("placeholder",z);0<E()&&d.show();Q(b.data("node-id"));var G=c(".tag-cloud",e);vBulletin.tagEditor.fetchPopularTags({type:u.data("type")||
"nodes",noformat:1,success:function(H){G.html(H);r(G.find(".tagcloudlink"),u)},error:function(H){G.html('<span class="error">{0}</span>'.format(H))}})},close:function(){u.data("autocomplete-instance").close()}}).dialog("open"),b.data("tag-dialog",e),e.data("parent",b.closest("form, .search-controls-tags, .form_row"))):(e=b.data("tag-dialog")||c(),e.dialog("open"));return!1}var F=this,A=!1,B=!1,I=vBulletin.options.get("tagmaxlen")||25,R=vBulletin.options.get("tagminlen")||3,t=0,p=0,J=!1,d=c(f),n=d.closest(".tag-editor-container"),
u=d.closest(".tag-editor-wrapper");n.data("node-id");var l=!1,z=d.attr("placeholder")?d.attr("placeholder"):"",K=z?z.length:10,C=function(a,b){if(!l)return!1;if("undefined"==typeof b||1>b)b=pageData.userid;var e=l.getMinLength();if(a.length<e)return vBulletin.warning("error",["invalid_x_tag_length",e]),!1;1==vBulletin.options.get("tagforcelower")&&(a=a.toLowerCase());a.length>I&&(a=a.substr(0,I));b=l.addElement(a,b);d.val("");E();return b},N=function(a){var b=a.length,e;for(e=0;e<b;++e)C(a[e])},L=
function(){d.attr("size",K);var a=JShtmlEncode(c.trim(d.val()));if(""==a)return!1;var b="Adding tag: "+a;0<D()&&(setTimeout(function(){C(a)},10),b+=" (Tag added)");console.log(b)},D=function(){if(g||0==t&&0==p)return!0;var a=l.countElements(),b=c(l.getElements()).filter(function(e,h){return 0==pageData.userid||h.value==pageData.userid}).length;a=0<t?t-a:p-a;return Math.min(0==p?a:p-b,a)},E=function(){var a=n.find(".you-may-add-x-tags"),b=D();if(!0===b)return!0;if(1<b)var e=["you_may_add_x_more_tags",
b];else 1==b?e="you_may_add_one_more_tag":(e="you_may_not_add_any_more_tags",b=0);a.toggleClass("warning",0==b).html(vBulletin.phrase.get(e));return b},Q=function(a){g?d[0].focus():x[a]?(t=x[a].maxTags,p=x[a].maxUserTags,J=x[a].canManageTags,m()):(x[a]={},vBulletin.AJAX({call:"/ajax/api/tags/getNodeTags",data:{nodeid:a},success:function(b){c.isArray(b.tags)&&(t=parseInt(b.maxtags,10),p=parseInt(b.maxusertags,10),J=b.canmanagetags,x[a]={maxTags:t,maxUserTags:p,canManageTags:J},m())},api_error:c.noop,
error:c.noop}))};this.addTag=function(a,b){C(a,b)};this.addTags=function(a){N(a)};this.setTags=function(a){l&&(l.clearElements(),N(a))};this.removeAllTags=function(){l.clearElements()};this.getTags=function(){return l?l.getLabels():!1};this.getTagEditor=function(){return d};u.data("initialized")?console.log("Tag Editor is already initialized."):(u.attr("data-initialized",!0),function(){if(0==d.length)return!1;d.attr("maxlength",I);l=new vBulletin_Autocomplete(d,{apiClass:"Tags",containerClass:(q||
"")+" entry-field h-clearfix",placeholderText:z,editorContext:{type:"tags",context:F},minLength:R,beforeAdd:function(a,b){A=B?!0:!1;return 0==D()?!1:!0},afterAdd:function(a,b){0==E()&&d.hide();d.attr("placeholder","");r(n.find(".tagcloudlink"),n)},afterDelete:function(a,b){A=B?!0:!1;b=E();if(g||0<b)d.show(),setTimeout(function(){d[0].focus()},10);d.attr("placeholder",function(){var h=l?l.getLabels():!1;return h&&0!=h.length?"":z});b=n.find(".tag-cloud .tagcloudlink");if(0==b.length){var e=n.find(".popular-tags-link");
e.length&&e.qtip&&(b=e.qtip("api").elements.tooltip.find(".tagcloudlink"))}b.each(function(){c(this).data("tag")==a&&c(this).removeClass("added")})}});d=l.getInputField();u.data("autocomplete-instance",l)}(),d.off("keydown").on("keydown",function(a){var b=c(a.target).val().length;c(a.target).attr("size",b>K?b:K);if(13==a.which)return A=B?!0:!1,L(),a.preventDefault(),!1}),d.off("blur").on("blur",function(a){B=setTimeout(function(){A||L();B=A=!1},0)}),d.off("click").on("click",function(a){c(a.target).hasClass("tag-input")||
(c(".tag-input",c(this)).trigger("focus"),A=B?!0:!1);return!1}),d.each(function(){c(this).closest("form").on("submit",L)}),c(".tag-cloud-text.inline-tag-cloud .popular-tags-link",n).off("click").on("click",function(){var a=n.find(".tag-cloud");vBulletin.tagEditor.fetchPopularTags({type:"nodes",noformat:1,success:function(b){a.html(b);r(a.find(".tagcloudlink"),n)},error:function(b){a.html('<span class="error">{0}</span>'.format(b))}})}),vBulletin.qtip.apply(c(".tag-cloud-text:not(.inline-tag-cloud) .popular-tags-link",
n),"qtip-populartags",{content:{title:{text:vBulletin.phrase.get("tag_cloud"),button:!1},text:function(a,b){function e(h){var y=vBulletin.phrase.get("error_fetching_popular_tags");h&&(y+=" "+vBulletin.phrase.get(h));b.set("content.text",'<span class="error">{0}</span>'.format(y))}vBulletin.AJAX({call:"/search/fetchTagCloud",data:{type:"nodes",noformat:1},success:function(h){b.set("content.text",'<div class="tag-cloud">{0}</div>'.format(h));h=b.elements.tooltip;h.on("click",".tag-cloud .tagcloudlink label",
v);r(h.find(".tagcloudlink"),u)},api_error:function(h){e(h[0])},error:function(){e()}});return vBulletin.phrase.get("working_ellipsis")}},position:{at:"bottom center",my:"top center",viewport:c(window),effect:!1},show:{event:"click",solo:!0},hide:"unfocus"}),n.on("click",".tag-cloud .tagcloudlink label",v),u.on("click",".add-tag-link",w),"undefined"!==typeof k&&w.call(k.target,k),c(document).trigger("vb-tag-editor-init",{$dialog:n}))};vBulletin.tagEditor.fetchPopularTags=function(f){f=f||{};f.type=
"search"!=f.type?"nodes":f.type;var g="function"==typeof f.error?f.error:c.noop;vBulletin.AJAX({call:"/search/fetchTagCloud",data:{type:f.type,noformat:f.noformat},success:function(q,k,m){"function"==typeof f.success&&f.success(q,k,m)},api_error:function(q){g("{0} {1}".format(vBulletin.phrase.get("error_fetching_popular_tags"),vBulletin.phrase.get(q[0])))},error:function(){g(vBulletin.phrase.get("error_fetching_popular_tags"))}})};c(function(){c(document).offon("click.tage",".tag-editor-container .cancel-tag-btn",
function(){c(".tag-editor-container").dialog("close").trigger("vb-tag-dialog-cancel")});c(document).offon("click.tage",".tag-editor-container .save-tag-btn",function(){var f=c(this).closest(".tag-editor-container"),g=f.find(".tag-input").val(),q=g.replace(/,/g,", "),k=f.data("parent");k.find(".tag-list span").text(q);k.find(".tag-input").val(g);k.find(".tag-list").toggleClass("h-hide",!g);f.dialog("close").trigger("vb-tag-dialog-save",{tagList:g})});c(document).offon("mousedown.tage",".tag-editor-container .autocomplete-container",
function(){var f=this;setTimeout(function(){var g=c(".autocompleteHelper:visible",f);0<g.length&&g[0].focus()},10);return!1});0<c(".js-content-entry-tag-editor").length&&vBulletin.tagEditor&&new vBulletin.tagEditor.instance(".js-content-entry-tag-editor");c(document).offon("click.tage",".js-edit-tags",P)})}})(jQuery);
;

